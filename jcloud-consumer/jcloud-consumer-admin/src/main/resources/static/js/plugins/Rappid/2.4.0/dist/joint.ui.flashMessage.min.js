/*! Rappid v2.4.0 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2019-07-01 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


joint.ui.FlashMessage=joint.ui.Dialog.extend({className:joint.ui.Dialog.prototype.className+" flash-message",options:joint.util.merge({},joint.ui.Dialog.prototype.options,{closeButton:!0,modal:!1,cascade:!0,closeAnimation:{delay:2e3,duration:200,easing:"swing",properties:{opacity:0}},openAnimation:{duration:200,easing:"swing",properties:{opacity:1}}}),init:function(){joint.util.bindAll(this,"startCloseAnimation"),joint.ui.Dialog.prototype.init.apply(this,arguments),this.on("close:animation:complete",this.close,this)},open:function(){joint.ui.Dialog.prototype.open.apply(this,arguments);var a=this.$(".fg");return this._foregroundHeight=a.height(),this.addToCascade(),a.css("height",0),this.startOpenAnimation(),this.options.closeAnimation&&this.options.closeAnimation.delay&&setTimeout(this.startCloseAnimation,this.options.closeAnimation.delay),this},close:function(){return joint.ui.Dialog.prototype.close.apply(this,arguments),this.removeFromCascade(),this},addToCascade:function(){if(this.options.cascade){var a=this.constructor.top;this.$(".fg").css("top",a),this.constructor.top+=this._foregroundHeight+this.constructor.padding}this.constructor.opened.push(this)},removeFromCascade:function(){if(this.options.cascade){for(var a=this.constructor.opened,b=!1,c=0;c<a.length;c++){var d=a[c];if(d.options.cascade&&b){var e=parseInt(d.$(".fg").css("top"),10);d.$(".fg").css("top",e-this._foregroundHeight-this.constructor.padding)}d===this&&(b=!0)}b&&(this.constructor.top-=this._foregroundHeight+this.constructor.padding)}this.constructor.opened=joint.util.without(this.constructor.opened,this)},startCloseAnimation:function(){this.$(".fg").animate(this.options.closeAnimation.properties,joint.util.assign({complete:function(){this.trigger("close:animation:complete")}.bind(this)},this.options.closeAnimation))},startOpenAnimation:function(){var a=this.$(".fg");a.animate(joint.util.assign({},this.options.openAnimation.properties,{height:this._foregroundHeight}),joint.util.assign({complete:function(){this.trigger("open:animation:complete")}.bind(this)},this.options.openAnimation))}},{top:20,padding:15,opened:[],open:function(a,b,c){return c=c||{},new joint.ui.FlashMessage(joint.util.assign({title:b,type:"info",content:a},c)).open(c.target)},close:function(){joint.util.invoke(this.opened,"close")}});