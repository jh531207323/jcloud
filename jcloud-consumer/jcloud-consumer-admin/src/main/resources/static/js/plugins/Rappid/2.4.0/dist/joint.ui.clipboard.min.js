/*! Rappid v2.4.0 - HTML5 Diagramming Framework - TRIAL VERSION

Copyright (c) 2015 client IO

 2019-07-01 


This Source Code Form is subject to the terms of the Rappid Trial License
, v. 2.0. If a copy of the Rappid License was not distributed with this
file, You can obtain one at http://jointjs.com/license/rappid_v2.txt
 or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/


joint.ui.Clipboard=Backbone.Collection.extend({LOCAL_STORAGE_KEY:"joint.ui.Clipboard.cells",defaults:{useLocalStorage:!0},copyElements:function(a,b,c){this.options=joint.util.assign({},this.defaults,c),c=this.options;var d=a.toArray(),e=joint.util.sortBy(b.cloneSubgraph(d,c),function(a){return a.isLink()?2:1});return this.reset(e),c.useLocalStorage&&window.localStorage&&localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(this.toJSON())),d},cutElements:function(a,b,c){var d=this.copyElements(a,b,c);return b.trigger("batch:start",{batchName:"cut"}),joint.util.invoke(d,"remove"),b.trigger("batch:stop",{batchName:"cut"}),d},pasteCells:function(a,b){if(b=joint.util.defaults(b||{},this.options),b.useLocalStorage&&this.isEmpty()&&window.localStorage){var c={cells:JSON.parse(localStorage.getItem(this.LOCAL_STORAGE_KEY))},d=(new joint.dia.Graph).fromJSON(c,{sort:!1});this.reset(d.getCells())}var e=this.map(function(a){return this.modifyCell(a,b)}.bind(this));return a.trigger("batch:start",{batchName:"paste"}),a.addCells(e),a.trigger("batch:stop",{batchName:"paste"}),this.copyElements(this,a),e},clear:function(){this.options={},this.reset([]),window.localStorage&&localStorage.removeItem(this.LOCAL_STORAGE_KEY)},modifyCell:function(a,b){return a.unset("z"),a.isLink()&&b.link&&a.set(b.link),b.translate&&a.translate(b.translate.dx||20,b.translate.dy||20),a.collection=null,a}});